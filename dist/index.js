var g=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var z=(t,e)=>{for(var n in e)g(t,n,{get:e[n],enumerable:!0})},G=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $(e))!q.call(t,i)&&i!==n&&g(t,i,{get:()=>e[i],enumerable:!(r=K(e,i))||r.enumerable});return t};var U=t=>G(g({},"__esModule",{value:!0}),t);var et={};z(et,{ValidationEngine:()=>S,ValidatorArrayLength:()=>O,ValidatorEmail:()=>L,ValidatorNumberRange:()=>N,ValidatorStringContains:()=>M,ValidatorStringLength:()=>A,ValidatorStringPattern:()=>F,ValidatorStringRequired:()=>j,countErrorsLike:()=>R,countNoticesLike:()=>k,countWarningsLike:()=>E,getValidationClass:()=>Y,hasError:()=>J,hasErrors:()=>Z,hasNotice:()=>X,hasNotices:()=>H,hasWarning:()=>Q,hasWarnings:()=>B});module.exports=U(et);function y(t,e,n=!1){if(!e||!t)return 0;if(n&&typeof t=="string")return e[t]?.length||0;let r;return typeof t=="string"?r=Object.keys(e).filter(i=>i.indexOf(t)!==-1):r=Object.keys(e).filter(i=>t.test(i)),r.reduce((i,o)=>i+e[o].length,0)}function R(t,e,n=!1){return y(t,e?.errors,n)}function E(t,e,n=!1){return y(t,e?.warnings,n)}function k(t,e,n=!1){return y(t,e?.notices,n)}function Z(t){return t?t.stats.total_errors>0:!1}function B(t){return t?t.stats.total_warnings>0:!1}function H(t){return t?t.stats.total_notices>0:!1}function m(t,e){return!e||!t?!1:typeof t=="string"?!!e[t]:Object.keys(e).some(n=>t.test(n))}function J(t,e){return m(t,e?.errors)}function Q(t,e){return m(t,e?.warnings)}function X(t,e){return m(t,e?.notices)}function Y(t,e,n=!0){return t?e?R(e,t,n)>0?"error":E(e,t,n)>0?"warning":k(e,t,n)>0?"notice":"none":t.level:"unknown"}function V(t){return t===null||typeof t!="object"?!1:Object.keys(t).length===0}function b(){return{state:"unknown",level:"unknown",stats:{started_at:new Date,finished_at:new Date,time:0,processed_rules:0,processed_validators:0,total_errors:0,total_warnings:0,total_notices:0,total_skipped:0},errors:{},warnings:{},notices:{},skipped:[]}}function d(t){let e=b();return e.state="internal error",e.error=t||"Invalid entry parameters",e}function x({validatorMessage:t,ruleMessage:e,path:n,data:r,value:i}){if(t){if(typeof t=="string")return t;let o=t(r,i);return typeof o=="string"&&o||'Empty message (validator), "'+n+'"'}if(e){if(typeof e=="string")return e;let o=e(r,i);return typeof o=="string"&&o||'Empty message (rule), "'+n+'"'}return'Empty message, "'+n+'"'}function w({path:t,obj:e,processingFn:n,skippingFn:r}){if(!t||!e)return;let i=(t||"").split(".");T({pathArray:i,targetPath:t,obj:e,processingFn:n,skippingFn:r})}function T({pathArray:t,targetPath:e,obj:n,processingFn:r,skippingFn:i,currentIndex:o=0}){let s=t[o];o++;let a=-1,f=!1,l=!1;if(s?.endsWith("[]")&&(s=s.substring(0,s.length-2),f=!0,l=!0),s?.endsWith("[*]")&&(s=s.substring(0,s.length-3),f=!0),s?.endsWith("]")){let u=/(\w+)\[([^}]+)]/g.exec(s);u&&u.length>1&&(s=u[1],a=Number(u[2]),isNaN(a)&&(a=-1)),f=!0}if(!s||!n.hasOwnProperty(s)||f&&!Array.isArray(n[s])||f&&a!==-1&&a>=n[s].length){i(e,s);return}let p=n[s];if(f&&a===-1){if(l){r(p,e);return}p.forEach((u,W)=>{let v=t.map((C,D)=>D===o-1?`${s}[${W}]`:C),h=v.join(".");if(o===t.length){r(u,h);return}T({pathArray:v,targetPath:h,obj:u,processingFn:r,skippingFn:i,currentIndex:o})});return}f&&a!==-1&&(p=p[a]),o<t.length?T({pathArray:t,targetPath:e,obj:p,processingFn:r,skippingFn:i,currentIndex:o}):r(p,e)}function P({rule:t,validationPath:e,value:n,data:r,result:i}){if(typeof t.active<"u"){if(t.active===!1){c("[inactive]",e,i);return}if(t.active!==!0&&!t.active(r,n)){c("[inactive]",e,i);return}}t.validators.forEach(o=>{if(!o.validator||typeof o.validator!="function"){c("[invalid validator]",e,i);return}i.stats.processed_validators++;let s=o.validator(n,o.params,r);if(typeof s>"u"){i.stats.total_skipped++;return}if(s===!0)return;let a=t.level||o.level||"error";if(!["error","warning","notice"].includes(a))return;let f=x({validatorMessage:o.message,ruleMessage:t.message,path:e,data:r,value:n}),l=a+"s";i.stats["total_"+a+"s"]+=1,i[l][e]?i[l][e].push(f):i[l][e]=[f]})}function c(t,e,n){n.stats.total_skipped++,n.skipped.push(e+", "+t)}function tt(t,e,n){let r=[];Object.keys(e).forEach(i=>{let o=e[i];if(o.postvalidator){r.push(i);return}if(!o||!o.validators||o.validators.length===0){c("[overall]",i,n);return}n.stats.processed_rules++,w({path:i,obj:t,processingFn:(s,a)=>{P({rule:o,validationPath:a,value:s,data:t,result:n})},skippingFn:(s,a)=>{c(s,a,n)}})}),_(n),r.length>0&&(r.forEach(i=>{let o=e[i];n.stats.processed_rules++;let s=o.postvalidator(t,n);if(typeof s>"u"){n.stats.total_skipped++;return}if(s===!0)return;let a=o.level||"error";if(!["error","warning","notice"].includes(a))return;let f=x({validatorMessage:void 0,ruleMessage:o.message,path:i,data:t}),l=a+"s";n[l][i]?n[l][i].push(f):n[l][i]=[f],n.stats["total_"+a+"s"]+=1}),_(n))}function _(t){t.stats.total_errors>0?t.level="error":t.stats.total_warnings>0?t.level="warning":t.stats.total_notices>0&&(t.level="notice")}var S={validate:(t,e)=>{if(!t)return d("No data");if(!e)return d("No Validation Model");if(V(t))return d("Empty/invalid data");if(V(e))return d("Empty/invalid Validation Model");let n=performance.now(),r=b();r.stats.started_at=new Date,r.stats.finished_at=null,r.level="none",tt(t,e,r);let i=performance.now();return r.stats.finished_at=new Date,r.stats.time=i-n,r.state="completed",r}};var I=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,L=(t,e)=>{if(typeof t>"u"||!t)return e?.skipIfEmpty===!0?void 0:!1;if(typeof t=="string")return I.lastIndex=0,I.test(t)};var O=(t,e)=>{if(!Array.isArray(t)||typeof e?.min<"u"&&typeof e?.min!="number"||typeof e?.max<"u"&&typeof e?.max!="number")return;let n=t.length;return n===0&&e?.skipIfEmpty===!0?void 0:typeof e?.min!="number"&&typeof e?.max!="number"?!1:n>=(e?.min||0)&&n<=(e?.max??1/0)};var A=(t,e)=>{if(typeof t!="string"||typeof e?.min<"u"&&typeof e?.min!="number"||typeof e?.max<"u"&&typeof e?.max!="number")return;let n=(e?.trim===!0?t.trim():t)||"",r=n.length;return!n&&e?.skipIfEmpty===!0?void 0:typeof e?.min!="number"&&typeof e?.max!="number"?!1:r>=(e?.min||0)&&r<=(e?.max??1/0)};var F=(t,e)=>{if(!(typeof t!="string"||e?.pattern?.constructor!==RegExp)&&!(!t&&e?.skipIfEmpty===!0))return e.pattern.lastIndex=0,e.pattern.test(t)};var M=(t,e)=>{if(typeof t!="string"||typeof e?.searchString!="string"||!t&&e?.skipIfEmpty===!0)return;let n=e.caseSensitive===!0?t:t.toLocaleUpperCase(),r=e.caseSensitive===!0?e.searchString:e.searchString.toLocaleUpperCase();return e.searchString?n.includes(r):!1};var j=(t,e)=>!t||typeof t!="string"?!1:e?.allowWhitespaces===!0?!0:t.replaceAll(/\s/g,"")!=="";var N=(t,e)=>{if(typeof t>"u")return e?.skipIfEmpty===!0?void 0:!1;if(typeof e?.min<"u"&&typeof e?.min!="number"||typeof e?.max<"u"&&typeof e?.max!="number")return;let n=typeof e?.min=="number",r=typeof e?.max=="number";if(!(!n&&!r))return r&&n?t>=e.min&&t<=e.max:n?t>=e.min:t<=e.max};0&&(module.exports={ValidationEngine,ValidatorArrayLength,ValidatorEmail,ValidatorNumberRange,ValidatorStringContains,ValidatorStringLength,ValidatorStringPattern,ValidatorStringRequired,countErrorsLike,countNoticesLike,countWarningsLike,getValidationClass,hasError,hasErrors,hasNotice,hasNotices,hasWarning,hasWarnings});
//# sourceMappingURL=index.js.map