function g(t,e,n=!1){if(!e||!t)return 0;if(n&&typeof t=="string")return e[t]?.length||0;let i;return typeof t=="string"?i=Object.keys(e).filter(r=>r.indexOf(t)!==-1):i=Object.keys(e).filter(r=>t.test(r)),i.reduce((r,o)=>r+e[o].length,0)}function S(t,e,n=!1){return g(t,e?.errors,n)}function I(t,e,n=!1){return g(t,e?.warnings,n)}function L(t,e,n=!1){return g(t,e?.notices,n)}function $(t){return t?t.stats.total_errors>0:!1}function q(t){return t?t.stats.total_warnings>0:!1}function z(t){return t?t.stats.total_notices>0:!1}function y(t,e){return!e||!t?!1:typeof t=="string"?!!e[t]:Object.keys(e).some(n=>t.test(n))}function G(t,e){return y(t,e?.errors)}function U(t,e){return y(t,e?.warnings)}function Z(t,e){return y(t,e?.notices)}function B(t,e,n=!0){return t?e?S(e,t,n)>0?"error":I(e,t,n)>0?"warning":L(e,t,n)>0?"notice":"none":t.level:"unknown"}function m(t){return t===null||typeof t!="object"?!1:Object.keys(t).length===0}function V(){return{state:"unknown",level:"unknown",stats:{started_at:new Date,finished_at:new Date,time:0,processed_rules:0,processed_validators:0,total_errors:0,total_warnings:0,total_notices:0,total_skipped:0},errors:{},warnings:{},notices:{},skipped:[]}}function d(t){let e=V();return e.state="internal error",e.error=t||"Invalid entry parameters",e}function b({validatorMessage:t,ruleMessage:e,path:n,data:i,value:r}){if(t){if(typeof t=="string")return t;let o=t(i,r);return typeof o=="string"&&o||'Empty message (validator), "'+n+'"'}if(e){if(typeof e=="string")return e;let o=e(i,r);return typeof o=="string"&&o||'Empty message (rule), "'+n+'"'}return'Empty message, "'+n+'"'}function h({path:t,obj:e,processingFn:n,skippingFn:i}){if(!t||!e)return;let r=(t||"").split(".");x({pathArray:r,targetPath:t,obj:e,processingFn:n,skippingFn:i})}function x({pathArray:t,targetPath:e,obj:n,processingFn:i,skippingFn:r,currentIndex:o=0}){let s=t[o];o++;let a=-1,f=!1,l=!1;if(s?.endsWith("[]")&&(s=s.substring(0,s.length-2),f=!0,l=!0),s?.endsWith("[*]")&&(s=s.substring(0,s.length-3),f=!0),s?.endsWith("]")){let u=/(\w+)\[([^}]+)]/g.exec(s);u&&u.length>1&&(s=u[1],a=Number(u[2]),isNaN(a)&&(a=-1)),f=!0}if(!s||!n.hasOwnProperty(s)||f&&!Array.isArray(n[s])||f&&a!==-1&&a>=n[s].length){r(e,s);return}let p=n[s];if(f&&a===-1){if(l){i(p,e);return}p.forEach((u,k)=>{let T=t.map((w,_)=>_===o-1?`${s}[${k}]`:w),v=T.join(".");if(o===t.length){i(u,v);return}x({pathArray:T,targetPath:v,obj:u,processingFn:i,skippingFn:r,currentIndex:o})});return}f&&a!==-1&&(p=p[a]),o<t.length?x({pathArray:t,targetPath:e,obj:p,processingFn:i,skippingFn:r,currentIndex:o}):i(p,e)}function O({rule:t,validationPath:e,value:n,data:i,result:r}){if(typeof t.active<"u"){if(t.active===!1){c("[inactive]",e,r);return}if(t.active!==!0&&!t.active(i,n)){c("[inactive]",e,r);return}}t.validators.forEach(o=>{if(!o.validator||typeof o.validator!="function"){c("[invalid validator]",e,r);return}r.stats.processed_validators++;let s=o.validator(n,o.params,i);if(typeof s>"u"){r.stats.total_skipped++;return}if(s===!0)return;let a=t.level||o.level||"error";if(!["error","warning","notice"].includes(a))return;let f=b({validatorMessage:o.message,ruleMessage:t.message,path:e,data:i,value:n}),l=a+"s";r.stats["total_"+a+"s"]+=1,r[l][e]?r[l][e].push(f):r[l][e]=[f]})}function c(t,e,n){n.stats.total_skipped++,n.skipped.push(e+", "+t)}function A(t,e,n){let i=[];Object.keys(e).forEach(r=>{let o=e[r];if(o.postvalidator){i.push(r);return}if(!o||!o.validators||o.validators.length===0){c("[overall]",r,n);return}n.stats.processed_rules++,h({path:r,obj:t,processingFn:(s,a)=>{O({rule:o,validationPath:a,value:s,data:t,result:n})},skippingFn:(s,a)=>{c(s,a,n)}})}),R(n),i.length>0&&(i.forEach(r=>{let o=e[r];n.stats.processed_rules++;let s=o.postvalidator(t,n);if(typeof s>"u"){n.stats.total_skipped++;return}if(s===!0)return;let a=o.level||"error";if(!["error","warning","notice"].includes(a))return;let f=b({validatorMessage:void 0,ruleMessage:o.message,path:r,data:t}),l=a+"s";n[l][r]?n[l][r].push(f):n[l][r]=[f],n.stats["total_"+a+"s"]+=1}),R(n))}function R(t){t.stats.total_errors>0?t.level="error":t.stats.total_warnings>0?t.level="warning":t.stats.total_notices>0&&(t.level="notice")}var F={validate:(t,e)=>{if(!t)return d("No data");if(!e)return d("No Validation Model");if(m(t))return d("Empty/invalid data");if(m(e))return d("Empty/invalid Validation Model");let n=performance.now(),i=V();i.stats.started_at=new Date,i.stats.finished_at=null,i.level="none",A(t,e,i);let r=performance.now();return i.stats.finished_at=new Date,i.stats.time=r-n,i.state="completed",i}};var E=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,M=(t,e)=>{if(typeof t>"u"||!t)return e?.skipIfEmpty===!0?void 0:!1;if(typeof t=="string")return E.lastIndex=0,E.test(t)};var j=(t,e)=>{if(!Array.isArray(t)||typeof e?.min<"u"&&typeof e?.min!="number"||typeof e?.max<"u"&&typeof e?.max!="number")return;let n=t.length;return n===0&&e?.skipIfEmpty===!0?void 0:typeof e?.min!="number"&&typeof e?.max!="number"?!1:n>=(e?.min||0)&&n<=(e?.max??1/0)};var N=(t,e)=>{if(typeof t!="string"||typeof e?.min<"u"&&typeof e?.min!="number"||typeof e?.max<"u"&&typeof e?.max!="number")return;let n=(e?.trim===!0?t.trim():t)||"",i=n.length;return!n&&e?.skipIfEmpty===!0?void 0:typeof e?.min!="number"&&typeof e?.max!="number"?!1:i>=(e?.min||0)&&i<=(e?.max??1/0)};var W=(t,e)=>{if(!(typeof t!="string"||e?.pattern?.constructor!==RegExp)&&!(!t&&e?.skipIfEmpty===!0))return e.pattern.lastIndex=0,e.pattern.test(t)};var C=(t,e)=>{if(typeof t!="string"||typeof e?.searchString!="string"||!t&&e?.skipIfEmpty===!0)return;let n=e.caseSensitive===!0?t:t.toLocaleUpperCase(),i=e.caseSensitive===!0?e.searchString:e.searchString.toLocaleUpperCase();return e.searchString?n.includes(i):!1};var D=(t,e)=>!t||typeof t!="string"?!1:e?.allowWhitespaces===!0?!0:t.replaceAll(/\s/g,"")!=="";var K=(t,e)=>{if(typeof t>"u")return e?.skipIfEmpty===!0?void 0:!1;if(typeof e?.min<"u"&&typeof e?.min!="number"||typeof e?.max<"u"&&typeof e?.max!="number")return;let n=typeof e?.min=="number",i=typeof e?.max=="number";if(!(!n&&!i))return i&&n?t>=e.min&&t<=e.max:n?t>=e.min:t<=e.max};export{F as ValidationEngine,j as ValidatorArrayLength,M as ValidatorEmail,K as ValidatorNumberRange,C as ValidatorStringContains,N as ValidatorStringLength,W as ValidatorStringPattern,D as ValidatorStringRequired,S as countErrorsLike,L as countNoticesLike,I as countWarningsLike,B as getValidationClass,G as hasError,$ as hasErrors,Z as hasNotice,z as hasNotices,U as hasWarning,q as hasWarnings};
//# sourceMappingURL=index.mjs.map